---
title: "Introducing statistics with \\texttt{intRo}"
author: "Eric Hare & Andee Kaplan"
date: "December 14, 2014"
output:
  pdf_document:
    includes:
      in_header: preamble.tex
    number_sections: yes
bibliography: refs.bib
---
\thispagestyle{empty}

\begin{abstract}
\texttt{intRo} is a modern web-based application for performing basic data analysis and statistical routines. Leveraging the power of \texttt{R} and \texttt{Shiny}, \texttt{intRo} implements common statistical functions in a powerful and extensible modular structure, while remaining simple enough for the novice statistician. This simplicity lends itself to a natural presentation in an introductory statistics course as a substitute for other commonly used statistical software packages, such as \texttt{Excel} and \texttt{JMP}. \texttt{intRo} is currently deployed at the URL \url{http://www.intro-stats.com}. Within this paper we introduce the application and explore the design decisions underlying \texttt{intRo} as well as highlight some challenges and advantages of reactive programming.
\end{abstract}

\twocolumn
\setcounter{page}{1}

# Introduction
The widespread adoption of \texttt{R} as a tool for statistical analysis has undoubtedly been a great development for the scientific community. However, using \texttt{R} in most cases still requires a basic knowledge of programming concepts which may be unfamiliar to the introductory statistics student. This issue may explain why introductory courses often utilize software applications such as \texttt{JMP}, even though instructors would tend to use a tool like \texttt{R} in their own work. Still, signficant compromises must be made when using software like \texttt{JMP}, including dealing with software licenses, unsupported desktop platforms, and non-ideal user interface decisions. In teaching STAT 226 at Iowa State University, we witnessed profound struggles by students attempting to practice the introductory concepts discussed in class. Often, these struggles were directly related to the use of the software and not any sort of fundamental misunderstanding of the material.

Upon the release of \texttt{RStudio}'s \texttt{Shiny} [@shiny] it became easy for an R-based analysis to be converted to an interactive web application. This in turn, led to the creation of an introductory statistics application which we call \texttt{intRo}. 

\texttt{intRo} offers a number of key advantages over traditional statistics software, which will be discussed at length in this text.

\ak{[Add some references about software discouraging people, and mention other new tools out there like swirl.]}

# What is \texttt{intRo}?
\texttt{intRo} is a web-based tool to accompany an introductory statistics class. It is meant to assist in the learning of statistics rather than a stand-alone deliverer of statistics education, with the intention of being used in conjunction with a guided class. 

We have three fundamental philosophies that guided the creation of \texttt{intRo}, and this comes out in the design. Primarily, \texttt{intRo} is \emph{easy} to use and can be an \emph{exciting} part of learning statistics. Additionally, \texttt{intRo} is an \emph{extensible} tool, allowing for a user of \texttt{intRo} to tailor the tool for her own classroom needs.

## Easy
In order for an application to be useful to students in their first statistics course, it can't hog the spotlight. Statistics as a subject should shine through as a fun and interesting topic to study, rather than being bogged down by difficult to learn software. With this in mind, in the development of \texttt{intRo} we focused on aspects of the user interface (UI) and output that make it easy to pick up without extensive training. We used large, easy to click icons in the page header to help students find exactly what they need easily. With this easy to use framework, we also made the functionality available in \texttt{intRo} the minimal necessary for an introductory statistics course. Additional functionality is nice, but if it clutters the UI beyond the point of usability, it will frustrate an introductory student. 

Beyond being simple, \texttt{intRo} is also consistent. The tool is organized around specific tasks a student may perform in the process of a data analysis, called modules. Each module maintains a consistent layout, helping the user to become familiar with the location of the options, the results, and the code. In figure \ref{fig:ui}, we highlight the five elements that comprise the \texttt{intRo} interface.

\begin{figure*}[ht!]
\centering
\includegraphics[width=\linewidth]{images/ui_annotate.pdf}
\caption{The five elements that comprise the \texttt{intRo} application: 1) top navigation, 2) side navigation, 3) options panel, 4) results panel, and 5) code panel.}
\label{fig:ui}
\end{figure*}

 1. **Top Navigation** - The top navigation bar includes two sets of buttons. The left-aligned buttons are informational buttons. The first is a link to \texttt{intRo}. The second is a link to this documentation page. The third is a link to the GitHub repository where the code for \texttt{intRo} is housed. The final button is a link to our websites, which contain contact information if there are any questions or comments. The right-aligned buttons are \texttt{intRo} utilities. The first is a button to toggle the visibility of the code panel (5). The last is a button to print the active module results, and the associated code (if visible).
 2. **Side Navigation** - The side navigation panel includes the modules that perform a specific data analysis task.
 3. **Options Panel** - The options panel includes module-specific options which the user can use to customize their results.
 4. **Results Panel** - The results pane displays the result of the selected module and options.
 5. **Code Panel** - The code panel displays the \texttt{R} code used to generate the results from the student's \texttt{intRo} session. The code panel is shown by default to facilitate an interest in coding, but can be hidden by clicking the code toggle button in the Top Navigation bar.

There are multiple modules within \texttt{intRo}, which perform specific data analysis tasks that employ an easy to use point-and-click interface. Each module is placed within a higher level category to further help students navigate the tool. The default modules included in \texttt{intRo} are split into three higher level categories - data, summaries, and statistics - and more modules can be easy added by an instructor, as detailed in section \ref{sec:extensible}. The default modules support uploading and downloading a dataset, transforming variables, graphical and numerical summaries, simple linear regression, contingency tables, and T-tests. 

In addition to making \texttt{intRo} intuitive to use, we've also created a documentation website that is consistent with the interface of the application. The documentation is available at http://gammarama.github.io/intRo/ and hyperlinked within the application itself. This documentation covers all default modules and makes learning to use \texttt{intRo} even more painless.

## Exciting
In general, introduction to statistics is a class undergraduate students dread. It's hard, the language is unfamiliar, and the software is hard to use. With \texttt{intRo}, we hope to flip this paradigm. \texttt{intRo} is a fun, easy to use tool that's available on the web, and is also usable on mobile devices. As a web-based application, this tool is immediately more familiar to students than a desktop application. With interactive plots from \texttt{ggvis} [@ggvis], \texttt{intRo} brings a `wow'-factor to learning introductory statistics.

Once students get pulled in by an easy to use interface and fun interaction with their data, \texttt{intRo} has an ulterior motive: to get students excited about programming. By navigating about the user interface of \texttt{intRo}, students are actually creating a fully-executable \texttt{R} script that they can download and run locally as well as viewing the script change real-time within the application. This code creation element of \texttt{intRo} is meant to generate excitement about programming in \texttt{R} and empower students to feel that they can generate code as well. \texttt{intRo} uses \texttt{rmarkdown}'s [@rmarkdown] \texttt{render} function in order to print the results, by dymanically executing the user's \texttt{R} script. By default, the output will include the \texttt{R} code, but if the user elects to hide the source code by clicking the code toggle button at the top, the code will not appear in the printed results.

## Extensible
\label{sec:extensible}
On the front end, user interaction with \texttt{intRo} is split into bitesize chunks that we call modules. This is true of the back end as well. Each module is a self contained set of \texttt{R} code that is dynamically added to the application at run time. What this means is that \texttt{intRo} is easily extended by the addition of modules within the framework underlying the application. This extensibility allows for \texttt{intRo} to be customized for an individual classroom setting, tailored to the needs of a particular course.

As an example of possible customization, an instructor may wish to introduce hypothesis testing from a randomization framework rather than distributional. In this case, a non-parametric test could be added easily as a module to be used instead of the T test. This addition would be fairly simple to complete. The user would fork \texttt{intRo} from http://github.com/gammarama/intRo and begin by adding six types of files to a folder within a module folder: `helper.R`, `observe.R`, `output.R`, `reactive.R`, `static.R`, and `ui.R`. Each of these files is written to comply with the reactive nature available in a \texttt{Shiny} application. The `ui.R` file contains all the user interface elements within the new module's tab. This will include any options in the options panel as well as results. The `helper.R` and `static.R` files refer to static functions and global variable that may be used within the module. The file `output.R` contains the reactive elements that tie output to the user interface within \texttt{Shiny} and `observe.R` and `reactive.R` contain elements within an `observer` function or `reactive` function within the \texttt{Shiny} framework. By placing each of these files within the `modules/nonparametric_test` folder and adding a single line to a navigation file indicating under which module grouping the non-parametric test module should go, a new module is available within \texttt{intRo} upon running the application.

\begin{figure*}[ht!]
\centering
\includegraphics[width=\linewidth]{images/app_creation_modules.pdf}
\caption{This figure depicts how the \texttt{server.R} and \texttt{ui.R} files are populated using the modular structure within \texttt{intRo}.}
\label{fig:app_creation_modules}
\end{figure*}

The process by which \texttt{intRo} is dynamically created upon running the application through module sourcing is detailed in figure \ref{fig:app_creation_modules}. The key driver to populating \texttt{server.R} and \texttt{ui.R} is the file \texttt{modules.txt}, which defines the placement of each module. The interface is then created with the following statement.

\footnotesize
```{r ui, eval=FALSE, tidy=TRUE, tidy.opts=list(width.cutoff=25)}
## Source ui
module_info <- read.table("modules/modules.txt", header = TRUE, sep=",")
sapply(file.path("modules", dir("modules")[dir("modules") != "modules.txt"], "ui.R"), source)

## mylist is a list containing the different ui module code
## Create the UI
shinyUI(
    navbarPage("intRo", id="top-nav",  theme = "bootstrap.min.css",
               tabPanel(title="", icon=icon("home"),
                        fluidRow(
                            do.call(navlistPanel, c(list(id = "side-nav", widths = c(2, 10)), mylist))
                        )
               ), ...
    ))
```
\normalsize

The key piece of code being the `do.call` statement loading the list of ui elements from the module's \texttt{ui.R} file. The server functions are then dynamically generated using a similar method.

\footnotesize
```{r server, eval=FALSE, tidy=TRUE, tidy.opts=list(width.cutoff=25)}
shinyServer(function(input, output, session) {
  ## Module info
  module_info <- read.table("modules/modules.txt", header = TRUE, sep=",")
  
  ## Modules
  types <- c("helper.R", "static.R", "observe.R", "reactive.R", "output.R")
  modules_tosource <- file.path("modules", 
                                apply(expand.grid(module_info$module, types), 1, paste, collapse = "/"))
  
  ## Source the modules
  for (mod in modules_tosource) {
      source(mod, local = TRUE)
  }
})
```
\normalsize
In this way, we were able to have \texttt{intRo} be fully extensible, its structure and functionality dependent entirely on the modules present within the application.

# In the classroom
\texttt{intRo}'s ease of use lends itself to a natural presentation in an introductory statistics course. Statistics software typically used in introductory courses, such as \texttt{JMP} and \texttt{Excel}, have restrictive software licensing and platform requirements that can limit the software's accessibility to students. Even if these limitations can be overcome, these software programs have non-ideal interfaces for an exploratory data analysis. \texttt{JMP}, for instance, hides several basic regression functions such as a line of best fit behind small red arrows. Using \texttt{R} itself in the classroom is an appealing alternative, but suffers from some other problems. Many students in introductory statistics courses have not been exposed to programming languages and concepts, which could require a substantial overhead in order to begin a basic statistical analysis. When results need to be submitted as homework, getting the output into a document can be a frustrating and tedious experience (this experience is made much easier with new tools like \texttt{rmarkdown}, but this again is a bit of a learning curve for the new statistics student).

We believe that \texttt{intRo} targets these key limitations. The interface is designed to be quick, seamless, and easy to understand. Because \texttt{intRo} is web-based, the statistical analysis can be performed from nearly any modern device. \texttt{R} underlies the analysis, but users need not be familiar with \texttt{R} or programming to perform it. The focal point of the interface is the output panel, allowing the student to remain focused on the results and limiting the need to fight with the interface itself to get work done. For those students who may have a natural inclination for programming, executable code is generated to allow a local reproduction of the analysis.

The features of \texttt{intRo} were selected in order to apply to the most commonly used lesson plans in early statistics courses. The textbook "The Art and Science of Learning from Data" by Agresti and Franklin [-@agresti2012statistics] references many of the focal points of introductory statistics, and \texttt{intRo} supports performing a majority of them. Part one, titled "Gathering and Exploring Data", covers graphical summaries, measures of spread and center, and avoiding the misuse of graphics in situations they are not appropriate. \texttt{intRo} includes modules for both graphical and numerical summaries covering these topics. Furthermore, \texttt{intRo} limits the display of variables to ones that are appropriate for a chosen plot type, helping to reinforce the appropriateness of particular graphics (Table \ref{tab:plottypes}).

\begin{table*}[ht!]
\centering
\begin{tabular}{|c|c|c|}
\hline
Plot Type&X Variable Type Allowed&Y Variable Type Allowed\\
\hline
Histogram&Numeric&N/A\\
Normal Quantile Plot&Numeric&N/A\\
Scatterplot&Numeric&Numeric\\
Line Chart&Numeric&Numeric\\
Boxplot&Categorical&Numeric\\
Bar Chart&Categorical&Numeric\\
Pareto Chart&Categorical&Numeric\\
Mosaic Plot&Categorical&Categorical\\
\hline
\end{tabular}
\label{tab:plottypes}
\caption{The plot and variable types allowed in \texttt{intRo}'s graphical module. For example, when the selected plottype is histogram, the interface displays only a single variable selection box (x), and the variables selectable in this box are only numeric. If a boxplot is selected, the x variable must be categorical and the y variable must be numeric, and the list of choices updates automatically to reflect this.}
\end{table*}
Part two of this text discusses probability and sampling distributions, which is outside the current realm of \texttt{intRo}, but part three focuses on inferential statistics. The inferential statistics include confidence intervals, hypothesis testing, and comparing two variables, all supported natively in \texttt{intRo}. Finally, part four of the text discusses the association between variables, including regression, functions that \texttt{intRo} performs with ease. Some of the more advanced topics of this section are currently unsupported by \texttt{intRo}, including multiple regression and nonparametric statistics.

Statistics courses with a lab component can most benefit from the use of \texttt{intRo}. As students learn the aforementioned concepts, they can practice using the tools to perform the statistical tests and summaries. They simply upload a dataset and click the module appropriate to the section of the class. Once they choose the options desired by the instructor (variables, confidence levels, etc.), they can view the results and ultimately print the output for turning in. Early labs can walk the user through the limited number of button presses and clicks necessary, while later labs can more vaguely describe the intended output in hopes that the user can easily navigate the \texttt{intRo} interface to obtain the results. For topics currently unsupported by \texttt{intRo}, the instructor can supplement its use with other web-based modules that are publicly available or create their own modules within \texttt{intRo} as detailed in section \ref{sec:extensible}.

# Reactive programming

Reactive programming is a programming paradigm that ``tackles issues posed by event-driven applications by providing abstractions to express programs as reactions to external events and having the language automatically manage the flow of time (by conceptually supporting simultaneity), and data and computation dependencies.'' [@bainomugisha2012survey] As implemented by \texttt{Shiny}, results automatically update when users interact with the interface. 

\texttt{intRo} leverages reactive programming techniques as data is manipulated by the user, this carries throughout the entire session. In a typical \texttt{Shiny} app, users interact with inputs, which in turn yield different results. Within \texttt{intRo}, the users are able to interact and manipulate the data underlying the entire application. This posed many challenges in the creation of \texttt{intRo}, namely timely save points according to the user's timeline, and reactive updating of variable lists tied to inputs across the entire application. Because the user may experiment with different configurations or select different variables, we did not want to store all actions taken in the intRo session. Rather, each module includes a button allowing the user to explicitly store the output visible in the results panel into the R script. This way, output is only stored when the user is satisfied, and the resulting output is not cluttered with unnecessary information.

In the creation of \texttt{intRo} we walked a fine line between giving the user flexibility and having realistic usability. At the same time, \texttt{intRo} was created as a consumer of another package, \texttt{Shiny}, in which we as developers were the beneficiaries of another team of developers' decision to balance flexibility and usability. For a tangible example, consider the graphical summaries module. We only allow variables of a type consistent with the selected plot to be displayed. This is a conscious decision that limits an \texttt{intRo} user's flexibility, while maximizing the usability (by minimizing crashes) of the application. On the flip side of this, \texttt{Shiny} allows much higher flexibility. For instance, the entire application (including user interface) is created dynamically upon load, based on the modules currently housed within \texttt{intRo}, as detailed in section \ref{sec:extensible}. However, \texttt{Shiny} does have limits in its flexibility based on the designers decisions for usability. One current example the slider element. This element allows for fixed width steps from its minimum to its maximum. The JavaScript library being utilized in \texttt{Shiny} allows for arbitrary function calls to to generate these steps, however they must be written in plain JavaScript. This is an example of a decision made by the developers of \texttt{Shiny} to limit functionality in favor of usability of their package.

# Conclusions and future work

We believe \texttt{intRo} can be a powerful and effective tool for introductory statistics education. Its modular structure allows it to be flexible enough for many different applications and curriculums. Its ease-of-use allows the student to focus her attention on the statistics task at hand, rather than struggling with software licenses and confusing interface navigation. Reproducible code generated from each analysis can be used to spark an interest in \texttt{R} programming in those who might otherwise not be exposed to it.

In addition to the current functionality, there are some practical improvements in the works that will make \texttt{intRo} more useful to both students and instructors. In particular, we have begun development on an \texttt{R} package which will allow \texttt{intRo} modules to be created automatically from user written \texttt{R} code. This package will generate the necessary file structure to allow the module's incorporation into \texttt{intRo} as well as translate user code to \texttt{intRo} compatible code as populates the necessary files. This will vastly improve \texttt{intRo}'s flexibility and allow it to be used in a wider range of curricula, including more advanced statistics courses. Furthermore, we would like to utilize the expanded interactive capabilities of \texttt{ggvis} in order to make \texttt{intRo's} plots more engaging to students. One way to do this would be implementing linked plots, in which interactions with one plot are reflected in other plots that illustrate the same data. This would be particularly useful in the regression module so that students could explore observations with high influence and leverage.

Additionally,  \texttt{intRo} will be trialed in an introductory statistics course at Iowa State University in Spring 2015. This will allow us to assess its usefulness relative to software used in the past, as well as guage areas for improvement. Furthermore, we can determine the effectiveness of code printing on generating excitement from the students about programming in \texttt{R}. 

Challenges do exist with regards to the wider adoption of \texttt{intRo}. For instance, we will need to monitor how well the server hosting \texttt{intRo} handles the load of dozens of students performing data analyses at once. If performance issues are encountered, the infrastructure used may need to be expanded to handle current and future load. An unknown quantity will be how feasible it is to increase adoption of \texttt{intRo} across the department, as well as to other universities. 

Regardless, tools that focus on usability and extensibility in statistics education, such as \texttt{intRo}, are sure to encourage the next round of innovators to be interested and excited about statistical computing.

# References

